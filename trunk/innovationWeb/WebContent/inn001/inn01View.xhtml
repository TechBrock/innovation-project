<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	template="/inn000/templateMaster.xhtml">
	
	<ui:define name="head">
		<link href="../themes/1/js-image-slider.css" rel="stylesheet" type="text/css" />
		<script src="../themes/1/js-image-slider.js" type="text/javascript" />
	</ui:define>

	<ui:define name="corpo">
		<t:saveState value="#{ModeloBo}"/>
		<div id="sliderFrame">
			<div id="ribbon" />
			<div id="slider">
				<img src="../images/promocao/pro1a.jpg"	alt="Bicicleta Caloi - 29" /> 
				<img src="../images/promocao/pro2a.jpg" alt="Bicileta Caloi Urbe" /> 
				<img src="../images/promocao/pro3a.jpg" alt="Bicileta Mormaii Innovation" />
			</div>
		</div>
		<a4j:commandButton value="Buscar" action="#{ModeloBo.getModelo}" reRender="form1:gridProdutos"/>
		<rich:spacer height="100px"></rich:spacer>
			<div align="center" style="width: 100%;"	>
			 <rich:dataGrid
			 	id="gridProdutos" 
			 	binding="#{ModeloBo.initTable}"
			 	value="#{ModeloBo.modeloAl}" 
			 	var="lista" 
			 	columns="5" 
			 	elements="20" 
			 	width="400px">
				 
					<div align="center" 
						style="border:none; width: 220px; padding-top: 3px;">
						<table width="90%">
						<tr>
							<td>
								<a4j:mediaOutput element="img" mimeType="application/jpg" 
									cacheable="false"
									createContent="#{ModeloBo.montaImagem}"
									value="#{lista.id}"
									session="true"
									style="width: 200px; heigh: 200px;"/>		
							</td>
						</tr>
						<tr>
							<td align="center">
								<h:outputText value="#{lista.nome}" styleClass="outputTituloBik"/>
							</td>
						</tr>
						<tr>
							<td align="center">
								<h:outputText value="Por apenas: "/>
								<h:outputText value="#{lista.precoAtual}" styleClass="outputPreco"/>
							</td>
						</tr>
						<tr>
							<td align="center">
								<div class="divBtnBike">
									<a4j:commandButton  image="/images/buttons/search.png"
										style="width: 20px; heigth:20px;" 
										title="Detalhar"
										oncomplete="Richfaces.showModalPanel('modalDetalhar')"
										reRender="viewModalDetalhar:formModal">
										<f:setPropertyActionListener value="#{lista}"
									 	target="#{ModeloBo.modeloDet}"/>
								</a4j:commandButton>
								<a4j:commandButton  image="/images/buttons/heart.png"
										title="Add. Favorito"
										action="#{FavoritoBo.addToFavorite}" 
										style="width: 20px; heigth:20px;">
										<f:setPropertyActionListener value="#{ModeloBo.modeloDet.id}" 
											target="#{FavoritoBo.favoritoVo.idModelo}"/>
										
										<f:setPropertyActionListener value="#{LoginBo.loginReturn.id}" 
												target="#{FavoritoBo.idUsuario}"/>
												
								</a4j:commandButton>	
								<a4j:commandButton  image="/images/buttons/cart.png"
										style="width: 20px; heigth:20px;" 
										title="Add. Carrinho"
										oncomplete="Richfaces.showModalPanel('modalDetalhar')"
										reRender="viewModalDetalhar:formModal">
										<f:setPropertyActionListener value="#{lista}"
									 	target="#{ModeloBo.modeloDet}"/>
								</a4j:commandButton>	
								
								</div>
								
							</td>
						</tr>
					</table>
					</div>
			</rich:dataGrid>
			</div>
	</ui:define>
	<ui:define name="modal">
		<ui:include src="/inn001/inn01Detalhe.xhtml"/>
	</ui:define>
</ui:composition>